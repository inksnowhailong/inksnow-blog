---
title: 一个问题,讲述一个高级工程师的一个方向
date: 2025-3-3
categories:
  - 编程
tags:
  - 实验
---
::: info 问题
    假如，一个vite的项目，内容很多，导致编译过程需要很久，该如何解决？
    我们假定占用了全部计算资源，并行在这里是无效的，打包时长依然较多。
:::

## 高级前端开发和ai的方案
首先，这是一些高级前端开发的方案，和提问Grok3给出的方案
1. 代码分割，配置vite，对资源拆分成多个小chunk
2. 使用cdn代替一些第三方库
3. 静态资源，从构建流程中剔除，使用oss储存桶或者cdn来单独托管
4. 使用esbuild 进行构建流程
5. 拆分项目，monorepo模式或者微前端

由此可见，方案很多，以此可以认识到以下几点
1. AI目前依然只能依照已有的框架功能，或者网络上高级前端开发们的说法进行回复，不能有自己的创造性方法
2. 对于vite这个工具的依赖性很高，需要足够的熟悉，才能想到这些方案
3. 微前端和monorepo模式，虽然也是一个优秀方案，但是具有运行开销大，通信延迟，以及一些其他的局限性

**但是如果，一开始就并非是拆分项目的方案，且第三方库和资源都已经外置，只是项目本身的体量大呢？**

这是常见的情况，一些老项目诞生于 Webpack 时代，随着功能的不断扩展，项目体量逐渐膨胀。尽管开发团队已经对资源进行了诸多优化，例如代码分割、按需加载等，构建时间依然居高不下，打包效率成为瓶颈。高级工程师们绞尽脑汁，尝试各种优化手段，但受限于工具和架构，效果往往有限。

随后，Vite 的出现带来了新的希望。凭借 esbuild 的预构建能力和现代化的开发体验，Vite 在构建性能上大幅超越了 Webpack。然而，对于熟悉 Webpack API 的高级工程师来说，这却是一个挑战：多年积累的经验和熟悉的工具链优势荡然无存，取而代之的是需要重新学习 Vite 的配置和生态。对于老项目而言，完全迁移到 Vite 往往不现实——改造成本高昂且风险巨大。因此，一种折中的方案应运而生：保留原有 Webpack 架构，同时将新功能模块以微前端或 iframe 的形式引入，逐步实现现代化。

但技术迭代永无止境。如果有一天 Vite 也变得过时呢？事实上，新一代构建工具正在崛起，例如基于 Rust 开发的超高速工具（如 SWC、Turbopack），它们的性能表现远超 esbuild，甚至让 Vite 显得“慢”了起来。这种趋势指向一个不可避免的现实：**技术更新换代，高级工程师必须不断学习新的框架和 API**。新项目可以拥抱最新的技术栈，而老项目则继续依赖旧的工具链，形成了“新旧并存”的局面。

更令人担忧的是，中级开发者借助 AI 工具，能快速上手新工具并优化项目，达到甚至超越高级前端的水准。这源于技术迭代的强大推动力，却也让深耕框架底层的高级开发者感到苦涩——多年经验似乎在工具变革中贬值。

## 我们需要破局

AI带来的不应该是高级开发者对自己努力白费的恐惧，而应该是，高级前端开发不需要再陷入重复学习新框架底层的错误路线。

既然工具变得越来越自动化，AI可以加速对工具的学习使用，那么高级前端开发们，应该换条路了。



## 架构设计，设计模式提供更好方向

我的方案是通过架构设计和设计模式实现以下目标：

- 从项目启动时，将业务逻辑与页面分离。
- 分离高层策略与低层实现，将极少变动的内容解耦。
- 独立工具函数和纯函数，形成通用模块。

无论使用何种构建工具，其核心流程（如打包前、打包后、文件解析时）都是固定的,且一定存在钩子函数。因此，可以在打包时：

**将不依赖业务逻辑、极少变动的高层策略部分和工具类单独打包。** *拆分颗粒度需平衡 HTTP 请求量，避免过多小文件*。

这些独立的部分可复用于多个项目，无需每次重新打包，构建工具哪怕迭代了，也不影响，此路子可以很容易的迁移走。甚至页面使用的渲染框架变更，比如vue2变成了vue3，依旧可以复用大量业务代码。

**“增量构建”能替代吗？**
有人可能会问：如果构建工具支持增量构建，只打包变化部分，会不会更好？

这看似是更自动、更细粒度的优化，但相对于我的方案依然有弱点：

- 复用性不足：增量构建聚焦打包后结果的复用，而打包前的代码复用性与扩展性仍需人为设计。
- 定制限制：工具自动生成的打包逻辑（加时间戳或哈希）具有唯一性，若要跨项目复用打包结果，仍需人工干预流程。
- 技术局限：目前增量构建技术（如 Vite 的实验性功能）尚不成熟，复杂代码下难以精准识别“真正变化的部分”。

## 没有完美的方案

我的方案并非是最好的。深入学习设计模式、理解架构设计与拆分，需要付出大量努力，大量思考，甚至直接考验编程思维，这本身就是成本。然而，当下前端开发过于依赖自动化工具，导致架构设计逐渐被忽视。而这恰恰是**AI 难以替代**的领域，因此，它也是提升个人价值的一个可行方向。
